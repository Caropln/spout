<div class="container_show">
  <div
    id="map"
    style="width: 100%;
    height: 715px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  ></div>
  <div class="info_place">
    <h1 class="header-activity__<%= @activity %>">
     <%= @place.name %></h1>
    <p style="font-weight: bold"> Photos </p>
    <%= cl_image_tag @place.pictures, class: "img-fluid" %>
    <p style="font-weight: bold"> Informations pratiques </p>
    <p><i class="fas fa-map-marker-alt icons" id="marker_color"></i> <%= @place.address %> </p>
    <p><i class="fas fa-map-signs icons" id="sign_color"></i><%= @place.accessibility %> </p>
    <p><i class="far fa-clock icons" id="schedules_color"></i> <%= @place.schedules %> </p>
    <p style="font-weight: bold"> Avis / Conseils </p>
    <div class="reviews-index">
      <div id="button-plus" >
        <button type="button" data-toggle="modal" data-target="#modalReviews" class="no-border">
        Voir plus
        </button>
      </div>

      <% @place.reviews.order(created_at: :desc).limit(4).each do |review| %>
      <%= render 'reviews/show', review: review %>
      <% end %>

      <%= simple_form_for [@place, @favorite_place] do |f| %>
        <%= f.submit "add a review", class: "btn btn-primary new-favorite" %>
      <% end %>
      <div>
      <p><span class="droite"><i class="fas fa-heart icons_heart" id="heart_color"></i></span></p>

      <div class="card-reviews-container">
        <% @place.reviews.order(created_at: :desc).limit(4).each do |review| %>
          <%= render 'reviews/show', review: review %>
        <% end %>

      </div>
    </div>
    <div class="fb-share-button"
    data-href="<%= place_url(@place) %>"
    data-layout="button_count">
  </div>
  </div>

</div>

<div class="modal fade" id="modalReviews" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" data-dismiss="modal" class="close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div id="reviews" >
          <%= render 'reviews/form', place: @place, review: @review %>

          <div class="reviews-container" id="essais">
            <% if @place.reviews.blank? %>
              <span class="no-review">Soyez le premier Ã  laisser un avis sur <%= @place.name %></span>
            <% else %>
              <% @place.reviews.order(created_at: :desc).each do |review| %>
               <%= render 'reviews/show', review: review %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const heart = document.querySelector(".droite");

  const addFavorite = () =>  {
    const submit = document.querySelector(".new-favorite");
    submit.click();
  }
  heart.addEventListener("click", addFavorite);
</script>
